#!/usr/bin/env node

const fs = require('fs')
const path = require('path')

const now = Math.floor(Date.now() / 1000)
console.log(`Current timestamp: ${now}`)

const outputPath = path.join(process.cwd(), 'src/now.ts')
if (fs.existsSync(outputPath)) fs.unlinkSync(outputPath)

fs.writeFileSync(outputPath, `
// This file was autogenerated at deployment time to export current timestamp since it cannot be accessed from subgraphs

export const NOW: string = '${now}'`)
